# This Dockerfile produces an Ubuntu image with ctng preinstalled.
FROM ubuntu:kinetic
# Set up non-root user
ARG CTNG_UID=1000
ARG CTNG_GID=1000
RUN groupadd -g $CTNG_GID ctng
RUN useradd -d /home/ctng -m -g $CTNG_GID -u $CTNG_UID -s /bin/bash ctng
# Non-interactive configuration of tzdata
ENV DEBIAN_FRONTEND noninteractive
ENV DEBCONF_NONINTERACTIVE_SEEN true
RUN { echo 'tzdata tzdata/Areas select Etc'; echo 'tzdata tzdata/Zones/Etc select UTC'; } | debconf-set-selections
# Dependencies
RUN apt-get update && apt-get upgrade -y && apt-get install -y \
	 gcc g++ gperf bison flex texinfo help2man make libncurses5-dev \
    python3-dev autoconf automake libtool libtool-bin gawk wget bzip2 xz-utils unzip \
    patch libstdc++6 rsync git meson ninja-build wget vim
# Install ct-ng tool
RUN wget http://crosstool-ng.org/download/crosstool-ng/crosstool-ng-1.25.0.tar.xz
RUN tar -xf crosstool-ng-1.25.0.tar.xz
RUN cd crosstool-ng-1.25.0 && ./configure && make && make install
USER ctng
RUN mkdir /home/ctng/work
WORKDIR /home/ctng/work